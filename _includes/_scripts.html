<!-- jQuery -->
<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>
<script src="{{ site.url }}/js/main.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', '{{ site.google_analytics }}']);
  _gaq.push(['_setDomainName', '{{ site.google_analytics_domain }}']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>

<script>
$.urlParam = function(name){
    var results = new RegExp('[\?&]' + name + '([^=&#]*)').exec(window.location.href);
    return results !== null;
}
if($.urlParam('linkify')) {
  $(".issues-list ul li").each(function( index ) {
    replacePattern = /\(#(\d*)\)/gim;
    $(this).html($(this).text().replace(replacePattern, '(<a href="https://github.com/QualityUnit/pap-issues/issues/$1" target="_blank">$1</a>)'));
  });
}
</script>

<script type="text/javascript">
	var _paq = window._paq || [];
	_paq.push(['enableLinkTracking']);
	_paq.push(['enableHeartBeatTimer', 30]);
	_paq.push(['trackPageView']);
	_paq.push(['enableCrossDomainLinking']);

	window.onerror = function (msg, url, lineNo, columnNo, error) {
	  var stackT = "";
	  if (typeof(error) != 'undefined' && typeof(error.stack) != 'undefined') {
	    stackT = error.stack.replace(/\n/g, ' ').substring(0, 1000);
	  }
	  _paq.push(['trackEvent', 'error', 'js', msg + "::" + url + "::" + lineNo + "::" + stackT]);
	};
	(function() {
	    _paq.push(['setSiteId', 'PAP-web']);
	    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
	    g.type='text/javascript'; g.async=true; g.defer=true; g.src='//analytics.qualityunit.com/i.js'; s.parentNode.insertBefore(g,s);
	  })();
</script>

<script type="text/javascript">
    let menuIcon = document.getElementById('menu-icon');
    let menuItems = document.getElementById('menu-items');
    menuIcon.addEventListener('click', function () {
        menuItems.classList.toggle('nav-active');
        menuIcon.classList.toggle('menu-close');
    });

    let reloading;

    function checkReloading() {
        if (window.location.hash === "#autoreload") {
            reloading = setTimeout("window.location.reload();", 30000);
            document.getElementById("reloadCB").checked = true;
        }
    }

    function toggleAutoRefresh(cb) {
        if (cb.checked) {
            window.location.replace("#autoreload");
            reloading = setTimeout("window.location.reload();", 30000);
        } else {
            window.location.replace("#");
            clearTimeout(reloading);
        }
    }

    window.onload = checkReloading;
</script>
